<?xml version="1.0"?>
<robot name="jb2a" xmlns:xacro="http://ros.org/wiki/xacro">
  <xacro:property name="pi" value="3.1415"/>
  <!-- To increase visibulity in RViz-->
  <xacro:property name="scale" value="10"/>
  <!-- Cange mm measures in meter*scale value -->
  <xacro:property name="scale_mm" value="${0.001*scale}"/>
  <xacro:property name="r" value="${pi/2}"/>
  <xacro:property name="p" value="${pi/2}"/>
  <xacro:property name="ya" value="${0}"/>
  <xacro:property name="x" value="${-0.5*scale}"/>
  <xacro:property name="y" value="${-25*scale}"/>
  <xacro:property name="z" value="${-8.5*scale}"/>
  <xacro:property name="angle_lim_low" value="${17/18*pi}"/>
  <xacro:property name="angle_lim_high" value="${1/18*pi}"/>


  <!-- Materials -->
    <material name="black">
      <color rgba="0 0 0 1"/>
    </material>

    <material name="white">
      <color rgba="1 1 1 1"/>
    </material>

    <material name="gray">
      <color rgba="0.5 0.5 0.5 1"/>
    </material>

    <material name="blue">
      <color rgba="0 0 1 1"/>
    </material>

    <material name="blue_light">
      <color rgba="0 0 0.5 1"/>
    </material>

    <material name="red">
      <color rgba="1 0 0 1"/>
    </material>

    <material name="red_light">
      <color rgba="0.5 0 0 1"/>
    </material>

    <material name="green">
      <color rgba="0 1 0 1"/>
    </material>

    <material name="green_light">
      <color rgba="0 0.5 0 1"/>
    </material>

    <material name="cyan">
      <color rgba="1 1 0 1"/>
    </material>

    <material name="cyan_light">
      <color rgba="0.5 0.5 0 1"/>
    </material>

    <material name="turcoise">
      <color rgba="0 1 1 1"/>
    </material>

    <material name="turcoise_light">
      <color rgba="0 0.5 0.5 1"/>
    </material>

    <material name="pink">
      <color rgba="1 0 1 1"/>
    </material>

    <material name="pink_light">
      <color rgba="0.5 0 0.5 1"/>
    </material>
  <!-- End Materials -->


  <!-- Base -->
    <link name="base_link">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/base.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="gray"/>
        <origin rpy="${pi} 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <link name="ball_bearings1">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/bearings.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="black"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="base_bearings_joint" type="fixed">
      <parent link="base_link"/>
      <child link="ball_bearings1"/>
      <origin rpy="0 0 0" xyz="0 0 ${38.5*scale_mm}"/>
    </joint>

    <link name="ball_bearings2">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/bearings.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="black"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="base_bearings2_joint" type="fixed">
      <parent link="base_link"/>
      <child link="ball_bearings2"/>
      <origin rpy="0 0 0" xyz="0 0 ${45.5*scale_mm}"/>
    </joint>
  <!-- End Base -->


  <!-- rotational ensemble -->
    <link name="servo1">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Servo.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="black"/>
        <origin rpy="0 0 0" xyz="${-10.09*scale_mm} 0 0"/>
      </visual>
    </link>

    <joint name="base_piece100_joint" type="revolute">
      <child link="servo1"/>
      <parent link="base_link"/>
      <origin rpy="${-pi/2} 0 0" xyz="0 0 ${95.5*scale_mm}"/>
      <axis xyz="0 1 0"/>
      <limit effort="1000.0" lower="${angle_lim_low}" upper="${angle_lim_high}" velocity="0.5"/>
    </joint>

    <link name="piece100">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece100.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="gray"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="piece100_servo1_joint" type="fixed">
      <parent link="servo1"/>
      <child link="piece100"/>
      <origin rpy="${-pi/2} ${-pi/2} 0" xyz="0 ${32.5*scale_mm} 0"/>
    </joint>

    <link name="piece11">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece11.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="gray"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="piece100_piece11_joint" type="fixed">
      <parent link="piece100"/>
      <child link="piece11"/>
      <origin rpy="0 ${pi/2} 0" xyz="${40*scale_mm} 0 ${-22.5*scale_mm}"/>
    </joint>

    <link name="piece11sym">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece11sym.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="gray"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="piece100_piece11sym_joint" type="fixed">
      <parent link="piece100"/>
      <child link="piece11sym"/>
      <origin rpy="0 ${pi/2} 0" xyz="${-40*scale_mm} 0 ${-22.5*scale_mm}"/>
    </joint>

    <link name="servo2">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Servo.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="black"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="piece11_servo2_joint" type="fixed">
      <parent link="piece11"/>
      <child link="servo2"/>
      <origin rpy="${-pi/2} 0 ${pi/2}" xyz="${2.5*scale_mm} ${0.5*scale_mm} ${37.5*scale_mm}"/>
    </joint>

    <link name="servo3">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Servo.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="black"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="piece11sym_servo3_joint" type="fixed">
      <parent link="piece11sym"/>
      <child link="servo3"/>
      <origin rpy="${pi/2} 0 ${pi/2}" xyz="${2.5*scale_mm} ${0.5*scale_mm} ${-37.5*scale_mm}"/>
    </joint>
  <!-- End rotation ensemble -->


  <!-- Arm1 -->
    <link name="arm1-piece12">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece12.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="green"/>
        <origin rpy="${pi/2} ${-pi/2} 0" xyz="0 0 ${-160*scale_mm}"/>
      </visual>
    </link>

    <joint name="servo2_arm1-piece12_joint" type="revolute">
      <parent link="servo2"/>
      <child link="arm1-piece12"/>
      <origin rpy="0 ${-pi/2} 0" xyz="${10.09*scale_mm} ${(37.5+10)*scale_mm} ${0*scale_mm}"/>
      <axis xyz="0 1 0"/>
      <limit effort="1000.0" lower="${angle_lim_low}" upper="${angle_lim_high}" velocity="0.5"/>
    </joint>

    <link name="arm1-piece15">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece15.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="cyan"/>
        <origin rpy="${pi/2} ${pi/2} 0" xyz="0 0 ${160*scale_mm}"/>
      </visual>
    </link>

    <joint name="servo3_arm1-piece15_joint" type="revolute">
      <parent link="servo3"/>
      <child link="arm1-piece15"/>
      <origin rpy="0 ${pi/2} 0" xyz="${10.09*scale_mm} ${(37.5+10)*scale_mm} ${0*scale_mm}"/>
      <axis xyz="0 1 0"/>
      <mimic joint="servo2_arm1-piece12_joint" multiplier="-1" offset="0"/>
      <limit effort="1000.0" lower="${angle_lim_low}" upper="${angle_lim_high}" velocity="0.5" scale="${scale} ${scale} ${scale}"/>
    </joint>

    <link name="arm1-piece13-1">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece13.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="red"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm1-piece12_arm1-piece13-1_joint" type="fixed">
      <parent link="arm1-piece12"/>
      <child link="arm1-piece13-1"/>
      <origin rpy="0 0 0" xyz="0 ${30*scale_mm} ${-130*scale_mm}"/>
    </joint>

    <link name="arm1-piece13-2">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece13.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="red"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm1-piece12_arm1-piece13-2_joint" type="fixed">
      <parent link="arm1-piece12"/>
      <child link="arm1-piece13-2"/>
      <origin rpy="0 0 0" xyz="${11*scale_mm} ${30*scale_mm} ${-68*scale_mm}"/>
    </joint>

    <link name="arm1-piece13-3">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece13.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="red"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm1-piece12_arm1-piece13-3_joint" type="fixed">
      <parent link="arm1-piece12"/>
      <child link="arm1-piece13-3"/>
      <origin rpy="0 0 0" xyz="${-11*scale_mm} ${30*scale_mm} ${-68*scale_mm}"/>
    </joint>

    <link name="radialBearing1">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/radialBearing.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="gray"/>
        <origin rpy="${pi/2} 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm1-piece15_radialBearing1_joint" type="fixed">
      <parent link="arm1-piece15"/>
      <child link="radialBearing1"/>
      <origin rpy="0 0 0" xyz="0 ${-1*scale_mm} ${160*scale_mm}"/>
    </joint>

    <link name="servo4">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Servo.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="black"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm1-piece12_servo4_joint" type="fixed">
      <parent link="arm1-piece12"/>
      <child link="servo4"/>
      <origin rpy="${pi} ${-pi/2} 0" xyz="0 ${(60-23.5)*scale_mm} ${-170.09*scale_mm}"/>
    </joint>
  <!-- End Arm1 -->


  <!-- Arm2 -->
    <link name="arm2-piece16">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece16.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="pink"/>
        <origin rpy="${pi/2} 0 0" xyz="${-120*scale_mm} 0 0"/>
      </visual>
    </link>

    <joint name="servo4_arm2-piece16_joint" type="revolute">
      <parent link="servo4"/>
      <child link="arm2-piece16"/>
      <origin rpy="0 ${-pi/2} 0" xyz="${10.09*scale_mm} ${(39.5+10)*scale_mm} ${0*scale_mm}"/>
      <axis xyz="0 1 0"/>
      <limit effort="1000.0" lower="${angle_lim_low}" upper="${angle_lim_high}" velocity="0.5"/>
    </joint>

    <link name="radialBearing3">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/radialBearing.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="gray"/>
        <origin rpy="${pi/2} 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm2-piece16_radialBearing3_joint" type="fixed">
      <parent link="arm2-piece16"/>
      <child link="radialBearing3"/>
      <origin rpy="0 0 0" xyz="${-120*scale_mm} ${-5*scale_mm} 0"/>
    </joint>

    <link name="radialBearing2">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/radialBearing.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="gray"/>
        <origin rpy="-${pi/2} 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="radialBearing2_radialBearing1_joint" type="revolute">
      <parent link="radialBearing1"/>
      <child link="radialBearing2"/>
      <origin rpy="0 ${-pi/2} 0" xyz="0 ${10*scale_mm} 0"/>
      <axis xyz="0 1 0"/>
      <mimic joint="servo4_arm2-piece16_joint" multiplier="1" offset="0"/>
      <limit effort="1000.0" lower="${angle_lim_low}" upper="${angle_lim_high}" velocity="0.5"/>
    </joint>

    <link name="arm2-piece14">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece14.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="turcoise"/>
        <origin rpy="0 ${pi/2} ${-pi/2}" xyz="0 0 ${120*scale_mm}"/>
      </visual>
    </link>

    <joint name="arm1-piece15_radialBearing2_joint" type="fixed">
      <parent link="radialBearing2"/>
      <child link="arm2-piece14"/>
      <origin rpy="0 0 0" xyz="0 ${0*scale_mm} 0"/>
    </joint>

    <link name="servo5">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Servo.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="black"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm2-piece14_servo5_joint" type="fixed">
      <parent link="arm2-piece14"/>
      <child link="servo5"/>
      <origin rpy="${pi} ${-pi/2} 0" xyz="0 ${36.50*scale_mm} ${(120-10)*scale_mm}"/>
    </joint>

    <link name="arm2-piece13-1">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece13.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="red"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm2-piece14_arm2-piece13-1_joint" type="fixed">
      <parent link="arm2-piece14"/>
      <child link="arm2-piece13-1"/>
      <origin rpy="0 0 0" xyz="${-11*scale_mm} ${30*scale_mm} ${60*scale_mm}"/>
    </joint>

    <link name="arm2-piece13-2">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece13.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="red"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm2-piece14_arm2-piece13-2_joint" type="fixed">
      <parent link="arm2-piece14"/>
      <child link="arm2-piece13-2"/>
      <origin rpy="0 0 0" xyz="${11*scale_mm} ${30*scale_mm} ${60*scale_mm}"/>
    </joint>
  <!-- End Arm2 -->


  <!-- Arm3 -->
    <link name="arm3-piece17">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece17.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="pink_light"/>
        <origin rpy="${-pi/2} 0 ${pi}" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="servo5_arm3-piece17_joint" type="revolute">
      <parent link="servo5"/>
      <child link="arm3-piece17"/>
      <origin rpy="0 ${-pi/2} 0" xyz="${10.09*scale_mm} ${(37.5+10)*scale_mm} ${0*scale_mm}"/>
      <axis xyz="0 1 0"/>
      <limit effort="1000.0" lower="${angle_lim_low}" upper="${angle_lim_high}" velocity="0.5"/>
    </joint>

    <link name="radialBearing4">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/radialBearing.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="gray"/>
        <origin rpy="-${pi/2} 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="radialBearing4_radialBearing3_joint" type="revolute">
      <parent link="radialBearing3"/>
      <child link="radialBearing4"/>
      <origin rpy="0 ${pi/2} 0" xyz="0 ${12*scale_mm} 0"/>
      <axis xyz="0 1 0"/>
      <mimic joint="servo5_arm3-piece17_joint" multiplier="-1" offset="0"/>
      <limit effort="1000.0" lower="${angle_lim_low}" upper="${angle_lim_high}" velocity="0.5"/>
    </joint>

    <link name="arm3-piece18">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece18.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="cyan_light"/>
        <origin rpy="${-pi/2} 0 ${pi}" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="radialBearing4_arm3-piece18_joint" type="fixed">
      <parent link="radialBearing4"/>
      <child link="arm3-piece18"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </joint>

    <link name="arm3-piece19">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Piece19.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="red_light"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm3-piece17_arm3-piece19_joint" type="fixed">
      <parent link="arm3-piece17"/>
      <child link="arm3-piece19"/>
      <origin rpy="${-pi/2} 0 ${-pi/2}" xyz="${57*scale_mm} ${-31*scale_mm} ${0*scale_mm}"/>
    </joint>

    <link name="servo6">
      <visual>
        <geometry>
          <mesh filename="package://my_urdf_tutorial/meshes/Servo.STL" scale="${scale} ${scale} ${scale}"/>
        </geometry>
        <material name="black"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </visual>
    </link>

    <joint name="arm2-piece14_servo6_joint" type="fixed">
      <parent link="arm3-piece19"/>
      <child link="servo6"/>
      <origin rpy="${pi/2} 0 ${pi}" xyz="${10*scale_mm} 0 ${-32.50*scale_mm}"/>
    </joint>
   <!-- End Arm4 -->

   <!-- Simple hand -->
    <link name="fakeHand">
       <visual>
         <geometry>
           <cylinder length="0.5" radius="0.2" scale="${scale} ${scale} ${scale}"/>
         </geometry>
         <material name="gray"/>
         <origin rpy="0 0 0" xyz="0 0 ${20*scale_mm}"/>
       </visual>
     </link>

    <joint name="servo6-fakeHand" type="revolute">
       <parent link="servo6"/>
       <child link="fakeHand"/>
       <origin rpy="${-pi/2} 0 0" xyz="${10.09*scale_mm} ${(37.5+10)*scale_mm} ${0*scale_mm}"/>
       <axis xyz="0 0 1"/>
       <limit effort="1000.0" lower="${angle_lim_low}" upper="${angle_lim_high}" velocity="0.5"/>
     </joint>
   <!-- End hand -->

  <gazebo>
    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
      <robotNamespace>/</robotNamespace>
    </plugin>
  </gazebo>

</robot>
